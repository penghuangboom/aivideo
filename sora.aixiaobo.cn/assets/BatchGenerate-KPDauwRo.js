import{d as Se,u as Fe,a as Ve,b as re,q as Ae,m as Ue,r as k,p as w,y as Ee,c as v,e,f as C,t as s,g as i,F as Q,B as J,D as Ne,C as z,h as ce,x as Le,j as de,w as je,A as U,o as b,_ as ze}from"./index-InSkuxQ1.js";import{r as Re,u as R,w as Me}from"./xlsx-CKN5doRT.js";import{a as Be,u as K}from"./taskHistory-CM6jBMei.js";const Oe={class:"batch-generate-page"},Pe={class:"upload-section card"},qe={class:"file-selection-row"},He={class:"form-group"},We={class:"file-input-group"},Qe=["value","placeholder"],Je={class:"form-group"},Ke={class:"file-input-group"},Xe=["placeholder"],Ye={class:"hint-box"},Ze={class:"hint"},et={class:"hint-list"},tt={class:"tips-box"},st={class:"tips-header"},at={class:"tips-table"},lt={class:"note"},nt={class:"action-buttons"},ot=["disabled"],it=["disabled"],rt={key:0,class:"stats-section card"},ct={class:"stats-grid"},dt={class:"stat-item"},ut={class:"stat-label"},pt={class:"stat-value"},ht={class:"stat-item success"},gt={class:"stat-label"},mt={class:"stat-value"},ft={class:"stat-item error"},vt={class:"stat-label"},bt={class:"stat-value"},_t={class:"stat-item"},xt={class:"stat-label"},yt={class:"stat-value"},$t={key:0,class:"failed-list"},wt={class:"failed-details"},kt={class:"failed-index"},Gt={class:"failed-reason"},Dt={key:1,class:"progress-bar"},Tt={class:"progress-text"},Ct={key:1,class:"tasks-section card"},It={class:"section-header"},St=["disabled"],Ft={class:"table-container"},Vt={class:"task-table"},At=["title"],Ut={class:"task-id-cell"},Et=["title"],Nt={key:0,class:"error-message"},Lt={key:2,class:"preview-section card"},jt={class:"section-header"},zt={class:"download-actions"},Rt={class:"checkbox-label"},Mt=["disabled"],Bt={class:"video-grid"},Ot={class:"video-checkbox"},Pt=["onUpdate:modelValue"],qt=["onClick"],Ht={class:"video-info"},Wt={class:"video-title"},Qt={class:"video-prompt"},Jt={class:"video-type"},Kt=["src"],Xt=Se({__name:"BatchGenerate",setup(Yt){const{t:o}=Fe(),X=Ue(),ue=Ve(),pe=re(),he=()=>{const a=pe.config.qrCodeUrl,l=document.createElement("div");l.style.cssText=`
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.7);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 10000;
  `,l.innerHTML=`
    <div style="
      background: white;
      padding: 30px;
      border-radius: 15px;
      text-align: center;
      max-width: 400px;
      box-shadow: 0 10px 40px rgba(0,0,0,0.3);
    ">
      <h3 style="margin: 0 0 20px 0; color: #333;">è”ç³»å®¢æœ</h3>
      <img src="${a}" alt="å®¢æœäºŒç»´ç " style="width: 200px; height: 200px; border-radius: 10px;" />
      <p style="margin: 20px 0 0 0; color: #666;">æ‰«æäºŒç»´ç è”ç³»å®¢æœå‡çº§ä¼šå‘˜</p>
      <button onclick="this.closest('div[style*=fixed]').remove()" style="
        margin-top: 20px;
        padding: 10px 30px;
        background: #3b82f6;
        color: white;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        font-size: 14px;
      ">å…³é—­</button>
    </div>
  `,l.onclick=t=>{t.target===l&&l.remove()},document.body.appendChild(l)};Ae(()=>{if(!ue.hasAdvancedPermission){const l=re().config.features.enableVipOnlyMode||!1;confirm(`æƒé™ä¸è¶³

æ‚¨å½“å‰çš„è´¦æˆ·æƒé™ä¸è¶³ï¼Œæ— æ³•ä½¿ç”¨æ­¤åŠŸèƒ½ã€‚

è¯·è”ç³»å®¢æœå‡çº§ç­‰çº§`)&&he(),X.push("/generate")}});const M=k(""),G=k(new Map),Y=k(),d=k([]),I=k(!1),E=k(!1),B=k(!1),V=k(null),Z=w(()=>d.value.length>0&&!I.value),N=w(()=>d.value.filter(a=>a.status==="success").length),O=w(()=>d.value.filter(a=>a.status==="failed").length),ge=w(()=>d.value.filter(a=>a.status==="pending").length),P=w(()=>d.value.filter(a=>a.status==="failed")),D=w(()=>d.value.filter(a=>a.status==="completed"&&a.taskId)),me=w(()=>{const a={pending:0,submitting:0,success:0,failed:0,completed:0};return d.value.forEach(l=>{a[l.status]=(a[l.status]||0)+1}),a});Ee([d,D],()=>{console.log("ğŸ“Š ä»»åŠ¡çŠ¶æ€ç»Ÿè®¡:",me.value),console.log("ğŸ“Š å®Œæˆä»»åŠ¡æ•°:",D.value.length)},{deep:!0});const q=w(()=>D.value.filter(a=>a.selected)),ee=w(()=>{if(d.value.length===0)return 0;const a=N.value+O.value;return Math.round(a/d.value.length*100)});function fe(){var a;(a=Y.value)==null||a.click()}function ve(a){const t=a.target.files;if(!t||t.length===0)return;G.value.clear();const f=t[0],r=f.webkitRelativePath||f.name,n=r.substring(0,r.lastIndexOf("/"));M.value=n||"å·²é€‰æ‹©ç›®å½•";let p=0;for(let g=0;g<t.length;g++){const x=t[g],_=x.name.toLowerCase();_.match(/\.(jpg|jpeg|png)$/)?G.value.set(x.name,x):_.match(/\.(gif|webp|bmp|svg|ico)$/)&&p++}const u=Array.from(G.value.keys()).join(", ");console.log(`å·²åŠ è½½ ${G.value.size} ä¸ªå›¾ç‰‡æ–‡ä»¶: ${u}`);let h=`âœ… å·²åŠ è½½ ${G.value.size} ä¸ªå›¾ç‰‡æ–‡ä»¶

ç›®å½•ï¼š${M.value}`;p>0&&(h+=`

âš ï¸ è·³è¿‡ ${p} ä¸ªä¸æ”¯æŒçš„æ–‡ä»¶ï¼ˆä»…æ”¯æŒ jpgã€png æ ¼å¼ï¼‰`),h+=`

å›¾ç‰‡åˆ—è¡¨ï¼š${u}`,alert(h)}function be(a){var n;const l=a.target,t=(n=l.files)==null?void 0:n[0];if(!t)return;if(!t.name.toLowerCase().match(/\.(xlsx|xls)$/)){alert("âŒ ä»…æ”¯æŒ Excel æ–‡ä»¶æ ¼å¼ï¼ˆ.xlsx æˆ– .xlsï¼‰"),l.value="";return}const r=new FileReader;r.onload=p=>{var u,h,g;try{const x=new Uint8Array((u=p.target)==null?void 0:u.result),_=Re(x,{type:"array"}),Ie=_.Sheets[_.SheetNames[0]],A=R.sheet_to_json(Ie,{header:1});console.log("ğŸ“Š Excel æ€»è¡Œæ•°:",A.length),console.log("ğŸ“Š Excel åŸå§‹æ•°æ®:",A);const y=[],W=[];for(let c=1;c<A.length;c++){console.log(`ğŸ“– æ­£åœ¨å¤„ç†ç¬¬ ${c+1} è¡Œ:`,A[c]);const T=A[c];if(!T||T.length===0||!T.some($=>$!=null&&$!=="")){console.log(`ç¬¬ ${c+1} è¡Œï¼šç©ºè¡Œï¼Œè·³è¿‡`);continue}const oe=(h=T[1])==null?void 0:h.toString().trim();if(!oe){console.warn(`ç¬¬ ${c+1} è¡Œï¼šæç¤ºè¯ä¸ºç©ºï¼Œè·³è¿‡`);continue}const ie=parseInt(T[2]),j=parseInt(T[3]),F=(g=T[4])==null?void 0:g.toString().trim(),m={index:c,prompt:oe,orientation:ie,duration:j,imageFile:F,status:"pending"};if([1,2].includes(ie)?[1,2,3,4].includes(j)?(j===3||j===4)&&(m.status="failed",m.error="æ‰¹é‡ç”Ÿæˆä¸æ”¯æŒProæ¨¡å¼ï¼ˆ25så’Œ15sé«˜æ¸…ï¼‰ï¼Œè¯·ä½¿ç”¨10s(1)æˆ–15s(2)",W.push(`ç¬¬ ${c+1} è¡Œï¼š${m.error}`)):(m.status="failed",m.error="æ—¶é•¿å¿…é¡»æ˜¯ 1 æˆ– 2ï¼ˆæ‰¹é‡ç”Ÿæˆä»…æ”¯æŒæ™®é€šæ¨¡å¼ï¼‰",W.push(`ç¬¬ ${c+1} è¡Œï¼š${m.error}`)):(m.status="failed",m.error="æ¨ªç«–å±å¿…é¡»æ˜¯ 1 æˆ– 2",W.push(`ç¬¬ ${c+1} è¡Œï¼š${m.error}`)),F)if(G.value.size===0)m.status="failed",m.error=`éœ€è¦å›¾ç‰‡ ${F}ï¼Œä½†æœªé€‰æ‹©å›¾ç‰‡ç›®å½•`,console.warn(`ç¬¬ ${c+1} è¡Œï¼š${m.error}`);else{const $=G.value.get(F);$?(m.imageData=$,console.log(`ç¬¬ ${c+1} è¡Œï¼šæˆåŠŸåŒ¹é…å›¾ç‰‡ ${F}`,{name:$.name,type:$.type,size:$.size})):(m.status="failed",m.error=`åœ¨å›¾ç‰‡ç›®å½•ä¸­æœªæ‰¾åˆ° ${F}`,console.warn(`ç¬¬ ${c+1} è¡Œï¼š${m.error}`))}y.push(m),console.log(`âœ… ç¬¬ ${c+1} è¡Œå·²æ·»åŠ åˆ°ä»»åŠ¡åˆ—è¡¨ï¼Œå½“å‰ä»»åŠ¡æ€»æ•°: ${y.length}`)}console.log("ğŸ“Š å¾ªç¯ç»“æŸï¼Œè§£æçš„ä»»åŠ¡æ€»æ•°:",y.length),console.log("ğŸ“Š æ‰€æœ‰ä»»åŠ¡:",y),d.value=y;const L=y.filter(c=>c.status==="failed"),ae=y.filter(c=>c.status==="pending"),le=ae.filter(c=>!c.imageData).length,ne=ae.filter(c=>c.imageData).length;console.log(`âœ… æˆåŠŸè§£æ ${y.length} ä¸ªä»»åŠ¡ï¼šæ–‡ç”Ÿè§†é¢‘ ${le} ä¸ªï¼Œå›¾ç”Ÿè§†é¢‘ ${ne} ä¸ªï¼Œå¤±è´¥ ${L.length} ä¸ª`);let S=`âœ… æˆåŠŸè§£æ ${y.length} ä¸ªä»»åŠ¡

`;S+=`æ–‡ç”Ÿè§†é¢‘ï¼š${le} ä¸ª
`,S+=`å›¾ç”Ÿè§†é¢‘ï¼š${ne} ä¸ª
`,L.length>0&&(S+=`
âš ï¸ å¤±è´¥ä»»åŠ¡ï¼š${L.length} ä¸ª

å¤±è´¥åŸå› ï¼š
`,L.forEach(c=>{S+=`â€¢ åºå· ${c.index}ï¼š${c.error}
`}),S+=`
è¿™äº›ä»»åŠ¡å°†è¢«è·³è¿‡ï¼Œå…¶ä»–ä»»åŠ¡å¯ä»¥æ­£å¸¸æäº¤`),alert(S)}catch(x){console.error("è§£æ Excel å¤±è´¥",x),alert("è§£æ Excel å¤±è´¥ï¼Œè¯·æ£€æŸ¥æ–‡ä»¶æ ¼å¼")}},r.readAsArrayBuffer(t)}function _e(){d.value.length!==0&&confirm(`ç¡®å®šè¦å–æ¶ˆæ‰€æœ‰ä»»åŠ¡å—ï¼Ÿ

å…± ${d.value.length} ä¸ªä»»åŠ¡å°†è¢«æ¸…ç©º`)&&(d.value=[],alert("âœ… å·²å–æ¶ˆæ‰€æœ‰ä»»åŠ¡"))}async function xe(){var a,l,t,f,r;if(Z.value){I.value=!0;for(const n of d.value)if(n.status==="pending"){n.status="submitting";try{const p=!!n.imageData;let u;if(p){console.log(`ä»»åŠ¡ ${n.index}ï¼šå›¾ç”Ÿè§†é¢‘ï¼Œæç¤ºè¯="${n.prompt}"ï¼Œå›¾ç‰‡="${n.imageFile}"`),console.log(`ä»»åŠ¡ ${n.index}ï¼šimageData å­˜åœ¨:`,!!n.imageData),console.log(`ä»»åŠ¡ ${n.index}ï¼šimageData è¯¦æƒ…:`,{name:(a=n.imageData)==null?void 0:a.name,type:(l=n.imageData)==null?void 0:l.type,size:(t=n.imageData)==null?void 0:t.size});const h=se(n.orientation,n.duration),g=new FormData;g.append("prompt",n.prompt),g.append("model",h),g.append("input_reference",n.imageData),console.log(`ä»»åŠ¡ ${n.index}ï¼šFormData å†…å®¹:`);for(let[x,_]of g.entries())_ instanceof File?console.log(`  ${x}: File(${_.name}, ${_.type}, ${_.size} bytes)`):console.log(`  ${x}:`,_);u=await U.createImageToVideo(g)}else{console.log(`ä»»åŠ¡ ${n.index}ï¼šæ–‡ç”Ÿè§†é¢‘ï¼Œæç¤ºè¯="${n.prompt}"`);const h=se(n.orientation,n.duration),g={prompt:n.prompt,model:h};console.log(`ä»»åŠ¡ ${n.index}ï¼šæ¨¡å‹=${h}`),u=await U.createTextToVideo(g)}u&&u.id?(n.taskId=u.id,n.status="success",n.submittedAt=new Date().toLocaleString(),n.progress=u.progress||0,console.log(`âœ… ä»»åŠ¡ ${n.index} æäº¤æˆåŠŸ: ${n.taskId}`),console.log('ğŸ’¡ æç¤ºï¼šä»»åŠ¡ä¼šè‡ªåŠ¨å‡ºç°åœ¨"ä»»åŠ¡è¿›åº¦"é¡µé¢'),Be({taskId:u.id,type:"batch-generate",status:"queued",progress:0,submittedAt:new Date().toISOString(),prompt:n.prompt})):(n.status="failed",n.error="æäº¤å¤±è´¥ï¼šæœªè¿”å›ä»»åŠ¡ID",console.error(`âŒ ä»»åŠ¡ ${n.index} æäº¤å¤±è´¥:`,u))}catch(p){n.status="failed",n.error=((r=(f=p==null?void 0:p.response)==null?void 0:f.data)==null?void 0:r.message)||(p==null?void 0:p.message)||"ç½‘ç»œé”™è¯¯",console.error(`ä»»åŠ¡ ${n.index} æäº¤å¼‚å¸¸:`,p)}await new Promise(p=>setTimeout(p,500))}I.value=!1,alert(`æ‰¹é‡æäº¤å®Œæˆï¼
æˆåŠŸï¼š${N.value} æ¡
å¤±è´¥ï¼š${O.value} æ¡`),N.value>0&&H()}}async function H(){var t,f;const a=d.value.filter(r=>["pending","submitting","success"].includes(r.status)&&r.taskId);if(a.length===0)return;for(const r of a)try{const n=await U.getVideoTask(r.taskId),p=n.status||((t=n.data)==null?void 0:t.status),u=String(p||"").toLowerCase();let h=u==="success"?"completed":u==="failure"?"failed":u==="in_progress"||u==="running"?"processing":u||"unknown";const g=n.progress??((f=n.data)==null?void 0:f.progress)??0;r.progress=g||0,g===100&&h!=="failed"&&(h="completed"),K(r.taskId,{progress:r.progress,status:h}),h==="completed"?(r.status="completed",r.videoUrl||(r.videoUrl=`/v1/videos/${r.taskId}/content`),K(r.taskId,{status:"completed",finishedAt:new Date().toISOString()})):h==="failed"?(r.status="failed",r.error="ç”Ÿæˆå¤±è´¥",K(r.taskId,{status:"failed",finishedAt:new Date().toISOString()})):r.status=r.status==="success"?"success":"pending"}catch(n){console.error(`âŒ æŸ¥è¯¢ä»»åŠ¡ ${r.taskId} çŠ¶æ€å¤±è´¥`,n)}d.value.some(r=>["pending","submitting","success"].includes(r.status))&&setTimeout(H,3e3)}async function ye(){E.value=!0,await H(),E.value=!1}function $e(){D.value.forEach(a=>{a.selected=B.value})}async function we(){const a=q.value;if(a.length===0){alert("è¯·å…ˆé€‰æ‹©è¦ä¸‹è½½çš„è§†é¢‘");return}for(const l of a){try{if(!l.taskId)continue;const t=await U.getVideoContent(l.taskId),f=URL.createObjectURL(t),r=document.createElement("a");r.href=f,r.download=`video_${l.index}_${l.prompt.slice(0,20).replace(/[^\w\u4e00-\u9fa5]/g,"_")}.mp4`,r.click(),URL.revokeObjectURL(f),console.log(`âœ… ä¸‹è½½ä»»åŠ¡ ${l.index} æˆåŠŸ`)}catch(t){console.error(`âŒ ä¸‹è½½ä»»åŠ¡ ${l.index} å¤±è´¥`,t)}await new Promise(t=>setTimeout(t,500))}alert(`ä¸‹è½½å®Œæˆï¼å…± ${a.length} ä¸ªä»»åŠ¡`)}async function ke(a){if(a.taskId)try{if(a.videoUrl){V.value=a;return}const l=await U.getVideoContent(a.taskId),t=URL.createObjectURL(l);a.videoUrl=t,V.value=a}catch(l){console.error("åŠ è½½è§†é¢‘å¤±è´¥",l),alert("åŠ è½½è§†é¢‘å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•")}}function te(){V.value=null}function Ge(){const a=R.book_new(),l=[["åºå·","æç¤ºè¯","æ¨ªç«–å±","æ—¶é•¿","å›¾ç‰‡åœ°å€"],[1,"ä¸€åªå¯çˆ±çš„å°çŒ«åœ¨è‰åœ°ä¸Šå¥”è·‘",1,1,""],[2,"å¤•é˜³ä¸‹çš„æµ·æ»©ï¼Œæµ·æµªæ‹æ‰“ç€æ²™æ»©",2,2,"beach.jpg"],[3,"åŸå¸‚å¤œæ™¯ï¼Œè½¦æµå¦‚æ¢­",1,2,""],[4,"æ£®æ—ä¸­çš„å°æºª",2,1,"forest.jpg"],[5,"","","",""]],t=R.aoa_to_sheet(l);t["!cols"]=[{wch:8},{wch:40},{wch:10},{wch:8},{wch:20}],R.book_append_sheet(a,t,"æ‰¹é‡ç”Ÿæˆæ¨¡æ¿"),Me(a,"æ‰¹é‡ç”Ÿæˆæ¨¡æ¿.xlsx"),alert("âœ… æ¨¡æ¿ä¸‹è½½æˆåŠŸï¼æ¨¡æ¿ä¸­å·²åŒ…å«ç¤ºä¾‹æ•°æ®ï¼Œè¯·å‚è€ƒå¡«å†™")}function se(a,l){const t=a===1;return l===2?t?"sora2-landscape-15s":"sora2-portrait-15s":t?"sora2-landscape":"sora2-portrait"}function De(a){return a===1?"10s":a===2?"15s":a===4?"15sé«˜æ¸…(ä¸æ”¯æŒ)":"25s(ä¸æ”¯æŒ)"}function Te(a){return{pending:"å¾…æäº¤",submitting:"æäº¤ä¸­",success:"å·²æäº¤",failed:"å¤±è´¥",completed:"å·²å®Œæˆ"}[a]||a}function Ce(a){return`status-${a}`}return(a,l)=>(b(),v("div",Oe,[e("div",Pe,[e("h3",null,s(i(o)("batchGenerate.configTitle")),1),e("div",qe,[e("div",He,[e("label",null,s(i(o)("batchGenerate.imageDirectory")),1),e("div",We,[e("input",{type:"text",value:M.value,readonly:"",placeholder:i(o)("batchGenerate.noDirectory"),class:"directory-input"},null,8,Qe),e("input",{type:"file",webkitdirectory:"",directory:"",onChange:ve,style:{display:"none"},ref_key:"directoryInput",ref:Y},null,544),e("button",{onClick:fe,class:"btn-secondary btn-compact"},s(i(o)("batchGenerate.selectDirectory")),1)])]),e("div",Je,[e("label",null,s(i(o)("batchGenerate.excelFile")),1),e("div",Ke,[e("input",{type:"file",accept:".xlsx,.xls",onChange:be,class:"file-input",placeholder:i(o)("batchGenerate.selectFile")},null,40,Xe)])])]),e("div",Ye,[e("p",Ze,s(i(o)("batchGenerate.importantNote")),1),e("ul",et,[e("li",null,s(i(o)("batchGenerate.mixedMode")),1),e("li",null,s(i(o)("batchGenerate.textToVideo")),1),e("li",null,s(i(o)("batchGenerate.imageToVideo")),1),e("li",null,s(i(o)("batchGenerate.imageFormat")),1),e("li",null,s(i(o)("batchGenerate.excelFormat")),1),e("li",null,s(i(o)("batchGenerate.imageDirectoryNote")),1),e("li",null,s(i(o)("batchGenerate.durationLimit")),1)])]),e("div",tt,[e("div",st,[e("h4",null,s(i(o)("batchGenerate.excelGuide")),1),e("button",{onClick:Ge,class:"btn-template"},s(i(o)("batchGenerate.downloadTemplate")),1)]),e("table",at,[e("thead",null,[e("tr",null,[e("th",null,s(i(o)("batchGenerate.columnName")),1),e("th",null,s(i(o)("batchGenerate.description")),1),e("th",null,s(i(o)("batchGenerate.example")),1)])]),e("tbody",null,[e("tr",null,[e("td",null,s(i(o)("batchGenerate.serialNumber")),1),e("td",null,s(i(o)("batchGenerate.serialNumberDesc")),1),e("td",null,s(i(o)("batchGenerate.serialNumberExample")),1)]),e("tr",null,[e("td",null,s(i(o)("generate.prompt")),1),e("td",null,s(i(o)("batchGenerate.promptDesc")),1),e("td",null,s(i(o)("batchGenerate.promptExample")),1)]),e("tr",null,[e("td",null,s(i(o)("generate.orientation")),1),e("td",null,s(i(o)("batchGenerate.orientationDesc")),1),e("td",null,s(i(o)("batchGenerate.orientationExample")),1)]),e("tr",null,[e("td",null,s(i(o)("generate.duration")),1),e("td",null,s(i(o)("batchGenerate.durationDesc")),1),e("td",null,s(i(o)("batchGenerate.durationExample")),1)]),e("tr",null,[e("td",null,s(i(o)("batchGenerate.imageAddress")),1),e("td",null,s(i(o)("batchGenerate.imageAddressDesc")),1),e("td",null,s(i(o)("batchGenerate.imageAddressExample")),1)])])]),e("p",lt,s(i(o)("batchGenerate.emptyPromptStop")),1)]),e("div",nt,[e("button",{onClick:xe,disabled:!Z.value||I.value,class:"btn-primary btn-large"},s(I.value?i(o)("batchGenerate.processing"):i(o)("batchGenerate.startBatch")),9,ot),e("button",{onClick:_e,disabled:d.value.length===0,class:"btn-cancel btn-large"},s(i(o)("common.cancel")),9,it)])]),d.value.length>0?(b(),v("div",rt,[e("h3",null,s(i(o)("batchGenerate.statsTitle")),1),e("div",ct,[e("div",dt,[e("span",ut,s(i(o)("batchGenerate.totalTasks")),1),e("span",pt,s(d.value.length),1)]),e("div",ht,[e("span",gt,s(i(o)("batchGenerate.success")),1),e("span",mt,s(N.value),1)]),e("div",ft,[e("span",vt,s(i(o)("batchGenerate.failed")),1),e("span",bt,s(O.value),1)]),e("div",_t,[e("span",xt,s(i(o)("batchGenerate.pending")),1),e("span",yt,s(ge.value),1)])]),P.value.length>0?(b(),v("div",$t,[e("h4",null,"âŒ å¤±è´¥ä»»åŠ¡åºå·ï¼š"+s(P.value.map(t=>t.index).join(", ")),1),e("div",wt,[(b(!0),v(Q,null,J(P.value,t=>(b(),v("div",{key:t.index,class:"failed-item"},[e("span",kt,"åºå· "+s(t.index),1),e("span",Gt,s(t.error),1)]))),128))])])):C("",!0),I.value?(b(),v("div",Dt,[e("div",{class:"progress-fill",style:Ne({width:ee.value+"%"})},null,4),e("span",Tt,s(ee.value)+"%",1)])):C("",!0)])):C("",!0),d.value.length>0?(b(),v("div",Ct,[e("div",It,[l[2]||(l[2]=e("h3",null,"ğŸ“ ä»»åŠ¡åˆ—è¡¨",-1)),e("button",{onClick:ye,class:"btn-secondary",disabled:E.value},s(E.value?"åˆ·æ–°ä¸­...":"ğŸ”„ åˆ·æ–°å…¨éƒ¨"),9,St)]),e("div",Ft,[e("table",Vt,[l[3]||(l[3]=e("thead",null,[e("tr",null,[e("th",null,"åºå·"),e("th",null,"æç¤ºè¯"),e("th",null,"ç±»å‹"),e("th",null,"æ¨ªç«–å±"),e("th",null,"æ—¶é•¿"),e("th",null,"å›¾ç‰‡"),e("th",null,"ä»»åŠ¡ID"),e("th",null,"çŠ¶æ€"),e("th",null,"è¿›åº¦"),e("th",null,"æäº¤æ—¶é—´")])],-1)),e("tbody",null,[(b(!0),v(Q,null,J(d.value,t=>(b(),v("tr",{key:t.index,class:z(Ce(t.status))},[e("td",null,s(t.index),1),e("td",{class:"prompt-cell",title:t.prompt},s(t.prompt),9,At),e("td",null,[e("span",{class:z(["type-badge",t.imageFile?"image-to-video":"text-to-video"])},s(t.imageFile?"å›¾ç”Ÿè§†é¢‘":"æ–‡ç”Ÿè§†é¢‘"),3)]),e("td",null,s(t.orientation===1?"æ¨ªå±":"ç«–å±"),1),e("td",null,s(De(t.duration)),1),e("td",null,s(t.imageFile||"-"),1),e("td",Ut,s(t.taskId||"-"),1),e("td",null,[e("span",{class:z(["status-badge",t.status]),title:t.error},s(Te(t.status)),11,Et),t.error?(b(),v("div",Nt,s(t.error),1)):C("",!0)]),e("td",null,s(t.progress||0)+"%",1),e("td",null,s(t.submittedAt||"-"),1)],2))),128))])])])])):C("",!0),D.value.length>0?(b(),v("div",Lt,[e("div",jt,[e("h3",null,"ğŸ¬ å®Œæˆçš„è§†é¢‘ ("+s(D.value.length)+")",1),e("div",zt,[e("label",Rt,[ce(e("input",{type:"checkbox","onUpdate:modelValue":l[0]||(l[0]=t=>B.value=t),onChange:$e},null,544),[[de,B.value]]),l[4]||(l[4]=Le(" å…¨é€‰ ",-1))]),e("button",{onClick:we,disabled:q.value.length===0,class:"btn-primary"}," ä¸‹è½½é€‰ä¸­ ("+s(q.value.length)+") ",9,Mt)])]),e("div",Bt,[(b(!0),v(Q,null,J(D.value,t=>(b(),v("div",{key:t.taskId,class:z(["video-item",{selected:t.selected}])},[e("div",Ot,[ce(e("input",{type:"checkbox","onUpdate:modelValue":f=>t.selected=f},null,8,Pt),[[de,t.selected]])]),e("div",{class:"video-thumbnail",onClick:f=>ke(t)},[...l[5]||(l[5]=[e("div",{class:"thumbnail-placeholder"},[e("span",{class:"play-icon"},"â–¶ï¸"),e("p",{class:"thumbnail-text"},"ç‚¹å‡»æ’­æ”¾")],-1)])],8,qt),e("div",Ht,[e("p",Wt,"åºå· "+s(t.index),1),e("p",Qt,s(t.prompt.slice(0,30))+s(t.prompt.length>30?"...":""),1),e("p",Jt,s(t.imageFile?"å›¾ç”Ÿè§†é¢‘":"æ–‡ç”Ÿè§†é¢‘"),1)])],2))),128))])])):C("",!0),V.value?(b(),v("div",{key:3,class:"video-modal",onClick:te},[e("div",{class:"modal-content",onClick:l[1]||(l[1]=je(()=>{},["stop"]))},[e("button",{class:"close-btn",onClick:te},"âœ•"),e("video",{src:V.value.videoUrl,controls:"",autoplay:""},null,8,Kt)])])):C("",!0)]))}}),ss=ze(Xt,[["__scopeId","data-v-d52237e8"]]);export{ss as default};
