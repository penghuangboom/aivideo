const r="task-history";function c(s){const n={id:Date.now().toString()+Math.random().toString(36).substr(2,9),...s},t=a();return t.unshift(n),t.length>500&&t.splice(500),e(t),n}function u(s,n){const t=a(),o=t.findIndex(i=>i.taskId===s);o!==-1&&(t[o]={...t[o],...n},e(t))}function a(){const s=localStorage.getItem(r);if(s)try{return JSON.parse(s)}catch(n){return console.error("加载任务历史失败",n),[]}return[]}function e(s){localStorage.setItem(r,JSON.stringify(s))}export{c as a,a as g,u};
